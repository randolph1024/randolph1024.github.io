{"title":"Datacom_CMD_VLAN_Stp&Rstp_Edit","uid":"bac1aa86ebce91d113e94cff61d66d9f","slug":"Datacom-CMD-VLAN-Stp","date":"2023-12-28T10:24:10.000Z","updated":"2024-04-08T05:47:10.939Z","comments":true,"path":"api/articles/Datacom-CMD-VLAN-Stp.json","keywords":null,"cover":"/img/data.jpeg","content":"<h2 id=\"数据传输\"><a href=\"#数据传输\" class=\"headerlink\" title=\"数据传输\"></a>数据传输</h2><p>应用层(数据data)-传输层+TCPheader(段segment)-网络层+IPheader(包packet)<br>数据链路层+Eth header(帧frame)+FCS-物理层(位bit)</p>\n<h3 id=\"基础命令\"><a href=\"#基础命令\" class=\"headerlink\" title=\"基础命令\"></a>基础命令</h3><pre><code class=\"highlight plaintext\">查看当前路径\npwd\n查看当前目录\ndir\n更多信息\nmore\n移动位置\ncd\n创建目录\nmkdir\n移除目录\nrmdir\ncopy\nmove\nrename\nsave\ndelete\nundelete\n清理垃圾箱\nreset recycle-bin\n\nip address\n\nreboot\n\nsystemname name\n\nclock timezone\n\nclock datetime\n\n夏令时\n\nclock daylight-saving-time\n\n重置\n\nreset saved-configuration\n\n时长保护\n\nidle-timeout minutes\n\n当前运行配置文件\n\ndisplay current-configuration\n\n保存的配置文件\n\ndisplay saved-configuration\n\n启动参数\n\ndisplay startup\n\nstartup saved-configuration\n\n删除配置禁用功能\n\nundo\n\n对比配置\n\ncompare configuration\n\nPutty con port连接</code></pre>\n\n<h3 id=\"vlan配置\"><a href=\"#vlan配置\" class=\"headerlink\" title=\"vlan配置\"></a>vlan配置</h3><pre><code class=\"highlight plaintext\">Pc send untagged frame to switch and then switch make tag on the untagged frame\n(vlan limit range 1-4094)\n帧的FCS字段是数据传输过程中的校验字段\nvlanID    PVID\ndisplay vlan\ndisplay vlan verbose\n查看交换机mac地址表\ndisplay Mac-address verbose\nvlan batch\n[port model]port link-type access/trunk/hybird\n配置缺省vlan\n[port model]port default vlan(vlan-id 1-4094)\nTrunk接口加入指定Vlan\n[port model]port trunk allow-pass vlan 1-4094/all\nvlan1 默认在trunk passlist中如无特殊需求进行删除\nundo port trunk allow-pass vlan 1\n\nTrunk口缺省Vlan\n[port model]port trunk pvid vlan (vlan id)\nHybird接口加入指定vlan\n[port model]port hybird untagged/tagged vlan （vlanid）\nhybird口缺省Vlan\n[port model]port hybird pvid vlan (vlan id)\n关闭多余的接口\n[port model]shoutdown\n二层接口转换三层\n[port model]undo portswitch\n设置vlan\n[sys model]vlan 3\n[sys model]vlan batch 2 to 6\n创建vlanif接口\n[sys model]interface Vlanif 3\n[port vlanif model]ip add 1.1.1.1\nMac与Vlan关联(基于mac划分Vlan使用hybird接口)\n[sys model]vlan 3\n[vlan model]mac-vlan Mac-address a09-asd-928\n[port model]Mac-vlan enable</code></pre>\n\n<h3 id=\"STP\"><a href=\"#STP\" class=\"headerlink\" title=\"STP\"></a>STP</h3><p>stp是被动算法，依赖定时BPDU报文收敛拓扑配置速度慢<br>影响网络通信速度，没有细致区分接口状态角色</p>\n<h3 id=\"RSTP\"><a href=\"#RSTP\" class=\"headerlink\" title=\"RSTP\"></a>RSTP</h3><p>RSTP具有端口角色，指定端口，根端口，预备端口，备份端口，边缘端口<br>具有三种端口状态收敛速度更快，兼容STP</p>\n<pre><code class=\"highlight plaintext\">桥ID   COST开销   RPC跟路径开销 PORTID.  BPDU\n配置生成树工作模式\n[sys model]stp mode (stp/rstp/mstp)\n可选 配置根桥设备优先级为0等级固定\n[sys model]stp root primary\n可选 配置备份根桥设备优先级为4096等级固定\n[sys model]stp root secondary\n可选 配置交换机stp优先级默认32768\n[sys model]stp priority 32768\n可选 配置接口路径开销\n[sys model]stp pathcost-standard\n设置开销值\n[port model]stp cost\n配置接口优先级默认128\n[Huawei-intf]stp priority 128\n启用生成树\n[sys model]stp enable\n查看生成树状态\n[sys model]display stp brief</code></pre>\n","feature":true,"text":"数据传输应用层(数据data)-传输层+TCPheader(段segment)-网络层+IPheader(包packet)数据链路层+Eth header(帧f...","permalink":"/post/Datacom-CMD-VLAN-Stp","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"DatacomIA","slug":"DatacomIA","count":1,"path":"api/categories/DatacomIA.json"}],"tags":[{"name":"DatacomIA","slug":"DatacomIA","count":1,"path":"api/tags/DatacomIA.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93\"><span class=\"toc-text\">数据传输</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">基础命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#vlan%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">vlan配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#STP\"><span class=\"toc-text\">STP</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#RSTP\"><span class=\"toc-text\">RSTP</span></a></li></ol></li></ol>","author":{"name":"Randolph","slug":"blog-author","avatar":"/img/log.jpg","link":"/","description":"Knowledge of operation and maintenance, sharing of difficult and miscellaneous diseases","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Windows_Help","uid":"0cd13ce9ab92a30df5783eae706c3634","slug":"Windows_Help","date":"2024-01-05T01:03:49.000Z","updated":"2024-04-08T05:52:03.979Z","comments":true,"path":"api/articles/Windows_Help.json","keywords":null,"cover":"/img/win.jpg","text":"操作系统版本、服务器型号和制造商,SN查询系统制造商和产品名： wmic csproduct get vendor, name 查询基本系统信息： system...","permalink":"/post/Windows_Help","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"Windows_Help","slug":"Windows-Help","count":1,"path":"api/categories/Windows-Help.json"}],"tags":[{"name":"Windows_Help","slug":"Windows-Help","count":1,"path":"api/tags/Windows-Help.json"}],"author":{"name":"Randolph","slug":"blog-author","avatar":"/img/log.jpg","link":"/","description":"Knowledge of operation and maintenance, sharing of difficult and miscellaneous diseases","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"MacServer","uid":"72ec0505b1547b1e526bd99489aa60e3","slug":"MacServer","date":"2024-01-17T00:27:56.000Z","updated":"2024-04-08T05:56:59.119Z","comments":true,"path":"api/articles/MacServer.json","keywords":null,"cover":"/img/mac.jpeg","text":"苹果硬件和MacOS作为服务器的局限性硬件选择和可扩展性：与专门的服务器硬件相比，苹果的硬件选择更加有限，可扩展性和定制性不如传统的服务器硬件。 企业级特性和支...","permalink":"/post/MacServer","photos":[],"count_time":{"symbolsCount":"4.7k","symbolsTime":"4 mins."},"categories":[{"name":"MacServer","slug":"MacServer","count":1,"path":"api/categories/MacServer.json"}],"tags":[{"name":"MacServer","slug":"MacServer","count":1,"path":"api/tags/MacServer.json"}],"author":{"name":"Randolph","slug":"blog-author","avatar":"/img/log.jpg","link":"/","description":"Knowledge of operation and maintenance, sharing of difficult and miscellaneous diseases","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}