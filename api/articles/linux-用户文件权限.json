{"title":"linux-用户文件权限","uid":"9255d8ca0d627fd1989a0fa839b6386e","slug":"linux-用户文件权限","date":"2021-11-07T07:37:44.000Z","updated":"2024-04-08T05:58:27.000Z","comments":true,"path":"api/articles/linux-用户文件权限.json","keywords":null,"cover":"/img/fireip.jpeg","content":"<h3 id=\"用户身份与能力\"><a href=\"#用户身份与能力\" class=\"headerlink\" title=\"用户身份与能力\"></a>用户身份与能力</h3><p>管理员UID为0：系统的管理员用户。<br>系统用户UID为1～999：Linux系统为了避免因某个服务程序出现漏洞而被黑客提权至整台服务器，默认服务程序会由独立的系统用户负责运行，进而有效控制被破坏范围。<br>普通用户UID从1000开始：是由管理员创建的用于日常工作的用户<br>    系统用户：<br>      RHEl7 UID:1-999<br>    RHEL5-6 UID:1-499<br>    普通用户：<br>      RHEl7 UID:1000-♾️<br>    RHEL5-6 UID:500-65535<br>用户组：<br>    基本组：默认生成（只能有一个）<br>    扩展组：获取额外权限（可以添加多个）</p>\n<pre><code class=\"highlight plaintext\">id命令用于显示用户的详细信息，语法格式为“id用户名”\n----------------------------------------------\nuseradd命令用于创建新的用户账户，语法格式为“useradd [参数] 用户名”\n-d    指定用户的家目录（默认为/home/username）\n-e    账户的到期时间，格式为YYYY-MM-DD.\n-u    指定该用户的默认UID\n-g    指定一个初始的用户基本组（必须已存在）\n-G    指定一个或多个扩展用户组\n-N    不创建与用户同名的基本用户组\n-s    指定该用户的默认Shell解释器\n-----------------------------------------------\ngroupadd命令用于创建新的用户组，语法格式为“groupadd [参数] 群组名”\n-----------------------------------------------\nusermod命令用于修改用户的属性，语法格式为“usermod [参数] 用户名”\n-c    填写用户账户的备注信息\n-d -m    参数-m与参数-d连用，可重新指定用户的家目录并自动把旧的数据转移过去\n-e    账户的到期时间，格式为YYYY-MM-DD\n-g    变更所属用户组\n-G    变更扩展用户组\n-L    锁定用户禁止其登录系统\n-U    解锁用户，允许其登录系统\n-s    变更默认终端\n-u    修改用户的UID\n------------------------------------------------\npasswd命令用于修改用户的密码、过期时间等信息，语法格式为“passwd [参数] 用户名”\n-l    锁定用户，禁止其登录\n-u    解除锁定，允许用户登录\n--stdin    允许通过标准输入修改用户密码，如echo &quot;NewPassWord&quot; | passwd --stdin Username\n-d    使该用户可用空密码登录系统\n-e    强制用户在下次登录时修改密码\n-S    显示用户的密码是否被锁定，以及密码所采用的加密算法名称\n-------------------------------------------------\nuserdel命令用于删除已有的用户账户，语法格式为“userdel [参数] 用户名”\n-f    强制删除用户\n-r    同时删除用户及用户家目录</code></pre>\n\n<h3 id=\"文件权限与归属\"><a href=\"#文件权限与归属\" class=\"headerlink\" title=\"文件权限与归属\"></a>文件权限与归属</h3><pre><code class=\"highlight plaintext\">            文件          目录\n读取(r)      cat          ls\n写入(w)      vim          touch\n执行(x)     ./script      cd\n------------------------------------------------\n权限项     读 写 执行      读 写 执行   读  写 执行\n宁符表示    r  w  x       r  w  x     r  w  x \n数宁表示    4  2  1       4  2  1     4  2  1 \n权限分配    文件所属者      文件所属组     其他用户\n\nchown 修改所有者、所有组  文件名\nchomd 权限  文件名称 （修改权限）</code></pre>\n\n<h3 id=\"文件的特殊权限\"><a href=\"#文件的特殊权限\" class=\"headerlink\" title=\"文件的特殊权限\"></a>文件的特殊权限</h3><p>SUID    使文件执行者临时获得文件所有者身权限<br>SGID    使文件执行者临时获得文件所有用户组权限<br>SBIT    粘滞位（保护位）只能被文件所有者执行删除修改</p>\n<pre><code class=\"highlight plaintext\">chmod：\nu+s    设置SUID权限\nu-s    取消SUID权限\ng+s    设置SGID权限\ng-s    取消SGID权限\no+t    设置SBIT权限\no-t    取消SBIT权限</code></pre>\n\n<h3 id=\"文件的隐藏属性\"><a href=\"#文件的隐藏属性\" class=\"headerlink\" title=\"文件的隐藏属性\"></a>文件的隐藏属性</h3><pre><code class=\"highlight plaintext\">chattr命令用于设置文件的隐藏权限，语法格式为“chattr +or-[参数] 文件名称”\ni    无法对文件进行修改；若对目录设置了该参数，则仅能修改其中的子文件内容而不能新建或删除文件\na    仅允许补充（追加）内容，无法覆盖/删除内容（Append Only）\nS    文件内容在变更后立即同步到硬盘（sync）\ns    彻底从硬盘中删除，不可恢复（用0填充原文件所在硬盘区域）\nA    不再修改这个文件或目录的最后访问时间（atime）\nb    不再修改文件或目录的存取时间\nD    检查压缩文件中的错误\nd    使用dump命令备份时忽略本文件/目录\nc    默认将文件或目录进行压缩\nu    当删除该文件后依然保留其在硬盘中的数据，方便日后恢复\nt    让文件系统支持尾部合并（tail-merging）\nx    可以直接访问压缩文件中的内容\n------------------------------------------------\nlsattr命令用于查看文件的隐藏权限，语法格式为“lsattr [参数] 文件名称”\nor lsattr 文件名称</code></pre>\n\n<h3 id=\"文件访问控制列表\"><a href=\"#文件访问控制列表\" class=\"headerlink\" title=\"文件访问控制列表\"></a>文件访问控制列表</h3><pre><code class=\"highlight plaintext\">setfacl命令用于管理文件的ACL权限规则，语法格式为“setfacl [参数] 文件名称”\n-u    对于某个用户u:username:rwx\n-m    修改权限\n-M    从文件中读取权限\n-x    删除某个权限\n-b    删除全部权限\n-R    递归子目录\n------------------------------------------------------\ngetfacl命令用于查看文件的ACL权限规则，语法格式为“getfacl [参数] 文件名称”\n清空所有ACL权限，请用-b参数；要删除某一条指定的权限，就用-x参数</code></pre>\n<h3 id=\"su命令与sudo服务\"><a href=\"#su命令与sudo服务\" class=\"headerlink\" title=\"su命令与sudo服务\"></a>su命令与sudo服务</h3><pre><code class=\"highlight plaintext\">su命令可以解决切换用户身份的需求\nsudo命令用于给普通用户提供额外的权限，语法格式为“sudo [参数] 用户名”\n-h    列出帮助信息\n-l    列出当前用户可执行的命令\n-u    用户名或UID值    以指定的用户身份执行命令\n-k    清空密码的有效时间，下次执行sudo时需要再次进行密码验证\n-b    在后台执行指定的命令\n-p    更改询问密码的提示语\n--------------------------------------------------------\nvisudo命令用于编辑、配置用户sudo的权限文件，语法格式为“visudo [参数]”。\nvisudo命令只有root管理员才可以执行，普通用户在使用时会提示权限不足</code></pre>\n","text":"用户身份与能力管理员UID为0：系统的管理员用户。系统用户UID为1～999：Linux系统为了避免因某个服务程序出现漏洞而被黑客提权至整台服务器，默认服务程序...","permalink":"/post/linux-用户文件权限","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"Linux","slug":"Linux","count":5,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":6,"path":"api/tags/Linux.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E4%B8%8E%E8%83%BD%E5%8A%9B\"><span class=\"toc-text\">用户身份与能力</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E4%B8%8E%E5%BD%92%E5%B1%9E\"><span class=\"toc-text\">文件权限与归属</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%87%E4%BB%B6%E7%9A%84%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90\"><span class=\"toc-text\">文件的特殊权限</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%87%E4%BB%B6%E7%9A%84%E9%9A%90%E8%97%8F%E5%B1%9E%E6%80%A7\"><span class=\"toc-text\">文件的隐藏属性</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8\"><span class=\"toc-text\">文件访问控制列表</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#su%E5%91%BD%E4%BB%A4%E4%B8%8Esudo%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">su命令与sudo服务</span></a></li></ol>","author":{"name":"Randolph","slug":"blog-author","avatar":"/img/log.jpg","link":"/","description":"Knowledge of operation and maintenance, sharing of difficult and miscellaneous diseases","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"linux 存储结构与管理硬盘","uid":"e769edd094fa55e708d00eec9988af0c","slug":"linux存储结构与管理硬盘","date":"2021-11-15T05:28:40.000Z","updated":"2024-04-08T05:54:00.000Z","comments":true,"path":"api/articles/linux存储结构与管理硬盘.json","keywords":null,"cover":"/img/Disk.jpg","text":"一切从“/”开始绝对路径（absolute path）：从/根目录写起 相对路径（relative path）：当前路径写起 -----------------...","permalink":"/post/linux存储结构与管理硬盘","photos":[],"count_time":{"symbolsCount":"13k","symbolsTime":"11 mins."},"categories":[{"name":"Linux","slug":"Linux","count":5,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":6,"path":"api/tags/Linux.json"}],"author":{"name":"Randolph","slug":"blog-author","avatar":"/img/log.jpg","link":"/","description":"Knowledge of operation and maintenance, sharing of difficult and miscellaneous diseases","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"linux 通道符","uid":"42ae80bb8c02377e1088b53eb45f0695","slug":"linux-通道符","date":"2021-10-15T05:28:40.000Z","updated":"2024-04-08T05:57:54.000Z","comments":true,"path":"api/articles/linux-通道符.json","keywords":null,"cover":"/img/file0.jpeg","text":"输出重定向清空写入 > 追加写入 >> 报错写入 2> 全部输出 &> 输入重定向文件导入 < 传递信息(传送门) | 命令行的通配符* 任意字符 ? 单个任意...","permalink":"/post/linux-通道符","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[{"name":"Linux","slug":"Linux","count":5,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":6,"path":"api/tags/Linux.json"}],"author":{"name":"Randolph","slug":"blog-author","avatar":"/img/log.jpg","link":"/","description":"Knowledge of operation and maintenance, sharing of difficult and miscellaneous diseases","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}