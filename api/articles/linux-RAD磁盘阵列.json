{"title":"linux RAD磁盘阵列","uid":"784cfd3583b2ab178009150908334afb","slug":"linux-RAD磁盘阵列","date":"2021-11-22T15:15:12.000Z","updated":"2024-04-08T05:58:46.762Z","comments":true,"path":"api/articles/linux-RAD磁盘阵列.json","keywords":null,"cover":"/img/rad.jpeg","content":"<h3 id=\"RAID-0、1、5、10方案技术对比\"><a href=\"#RAID-0、1、5、10方案技术对比\" class=\"headerlink\" title=\"RAID 0、1、5、10方案技术对比\"></a>RAID 0、1、5、10方案技术对比</h3><pre><code class=\"highlight plaintext\">RAID级别    最少硬盘    可用容量    读写性能    安全性\n0           2          n           n        低       追求最大容量和速度，任何一块盘损坏，数据全部异常。\n1           2          n/2         n        高    追求最大安全性，只要阵列组中有一块硬盘可用，数据不受影响。\n5           3          n-1         n-1      中    在控制成本的前提下，追求硬盘的最大容量、速度及安全性，允许有一块硬盘异常，数据不受影响。\n10          4          n/2         n/2      高    综合RAID1和RAID0的优点，追求硬盘的速度和安全性，允许有一半硬盘异常（不可同组），数据不受影响</code></pre>\n\n<h3 id=\"mdadm命令部署磁盘阵列\"><a href=\"#mdadm命令部署磁盘阵列\" class=\"headerlink\" title=\"mdadm命令部署磁盘阵列\"></a>mdadm命令部署磁盘阵列</h3><pre><code class=\"highlight plaintext\">参数    作用\n-a    检测设备名称\n-n    指定设备数量\n-l    指定RAID级别\n-C    创建\n-v    显示过程\n-f    模拟设备损坏\n-r    移除设备\n-Q    查看摘要信息\n-D    查看详细信息\n-S    停止RAID磁盘阵列</code></pre>\n\n<h3 id=\"部署测试\"><a href=\"#部署测试\" class=\"headerlink\" title=\"部署测试\"></a>部署测试</h3><pre><code class=\"highlight plaintext\">创建阵列\n[root@linuxprobe ~]# mdadm -Cv /dev/md0 -n 4 -l 10 /dev/sd[b-e]\nmdadm: layout defaults to n2\nmdadm: layout defaults to n2\nmdadm: chunk size defaults to 512K\nmdadm: size set to 20954112K\nmdadm: Defaulting to version 1.2 metadata\nmdadm: array /dev/md0 started.\n--------------------------------------------------\n初始化过程大约需要1分钟左右，期间可以用-D参数进行查看\n[root@linuxprobe ~]# mdadm -D /dev/md0\n/dev/md0:\n           Version : 1.2\n     Creation Time : Wed Jan 13 08:24:58 2021\n        Raid Level : raid10\n        Array Size : 41908224 (39.97 GiB 42.91 GB)\n     Used Dev Size : 20954112 (19.98 GiB 21.46 GB)\n      Raid Devices : 4\n     Total Devices : 4\n       Persistence : Superblock is persistent\n\n       Update Time : Thu Jan 14 04:49:57 2021\n             State : clean \n    Active Devices : 4\n   Working Devices : 4\n    Failed Devices : 0\n     Spare Devices : 0\n\n            Layout : near=2\n        Chunk Size : 512K\n\nConsistency Policy : resync\n\n              Name : localhost.localdomain:0  (local to host linuxprobe.com)\n              UUID : 289f501b:3f5f70f9:79189d77:f51ca11a\n            Events : 17\n\n    Number   Major   Minor   RaidDevice State\n       0       8       16        0      active sync set-A   /dev/sdb\n       1       8       32        1      active sync set-B   /dev/sdc\n       2       8       48        2      active sync set-A   /dev/sdd\n       3       8       64        3      active sync set-B   /dev/sde\n--------------------------------------------------\n初始化完成后格式化阵列\n[root@linuxprobe ~]# mkfs.ext4 /dev/md0\nmke2fs 1.44.3 (10-July-2018)\nCreating filesystem with 10477056 4k blocks and 2621440 inodes\nFilesystem UUID: d1c68318-a919-4211-b4dc-c4437bcfe9da\nSuperblock backups stored on blocks: \n    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, \n    4096000, 7962624\nAllocating group tables: done                            \nWriting inode tables: done                            \nCreating journal (65536 blocks): done\nWriting superblocks and filesystem accounting information: done  \n--------------------------------------------------\n挂载硬盘\n[root@linuxprobe ~]# mkdir /RAID\n[root@linuxprobe ~]# mount /dev/md0 /RAID\n[root@linuxprobe ~]# df -h\nFilesystem             Size  Used Avail Use% Mounted on\ndevtmpfs               969M     0  969M   0% /dev\ntmpfs                  984M     0  984M   0% /dev/shm\ntmpfs                  984M  9.6M  975M   1% /run\ntmpfs                  984M     0  984M   0% /sys/fs/cgroup\n/dev/mapper/rhel-root   17G  3.9G   14G  23% /\n/dev/sr0               6.7G  6.7G     0 100% /media/cdrom\n/dev/sda1             1014M  152M  863M  15% /boot\ntmpfs                  197M   16K  197M   1% /run/user/42\ntmpfs                  197M  3.5M  194M   2% /run/user/0\n/dev/md0                40G   49M   38G   1% /RAID\n--------------------------------------------------\n编辑启动文件\n[root@linuxprobe ~]# echo &quot;/dev/md0 /RAID ext4 defaults 0 0&quot; &gt;&gt; /etc/fstab</code></pre>\n\n<h3 id=\"磁盘模拟损坏\"><a href=\"#磁盘模拟损坏\" class=\"headerlink\" title=\"磁盘模拟损坏\"></a>磁盘模拟损坏</h3><pre><code class=\"highlight plaintext\">[root@linuxprobe ~]# mdadm /dev/md0 -f /dev/sdb\n--------------------------------------------------\n移除故障磁盘\n[root@linuxprobe ~]# mdadm /dev/md0 -r /dev/sdb\n--------------------------------------------------\n更换硬盘后添加硬盘\n[root@linuxprobe ~]# mdadm /dev/md0 -a /dev/sdb</code></pre>\n\n<h3 id=\"磁盘阵列-备份盘-x参数为备份参数\"><a href=\"#磁盘阵列-备份盘-x参数为备份参数\" class=\"headerlink\" title=\"磁盘阵列+备份盘    -x参数为备份参数\"></a>磁盘阵列+备份盘    -x参数为备份参数</h3><pre><code class=\"highlight plaintext\">[root@linuxprobe ~]# mdadm -Cv /dev/md0 -n 3 -l 5 -x 1 /dev/sd[b-e]</code></pre>\n","text":"RAID 0、1、5、10方案技术对比RAID级别 最少硬盘 可用容量 读写性能 安全性 0 2 n n 低 追求最大容量和速度，任何一块盘损坏，数据全部异常。...","permalink":"/post/linux-RAD磁盘阵列","photos":[],"count_time":{"symbolsCount":"3.8k","symbolsTime":"3 mins."},"categories":[{"name":"Linux","slug":"Linux","count":5,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":6,"path":"api/tags/Linux.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#RAID-0%E3%80%811%E3%80%815%E3%80%8110%E6%96%B9%E6%A1%88%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94\"><span class=\"toc-text\">RAID 0、1、5、10方案技术对比</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#mdadm%E5%91%BD%E4%BB%A4%E9%83%A8%E7%BD%B2%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97\"><span class=\"toc-text\">mdadm命令部署磁盘阵列</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">部署测试</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A3%81%E7%9B%98%E6%A8%A1%E6%8B%9F%E6%8D%9F%E5%9D%8F\"><span class=\"toc-text\">磁盘模拟损坏</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97-%E5%A4%87%E4%BB%BD%E7%9B%98-x%E5%8F%82%E6%95%B0%E4%B8%BA%E5%A4%87%E4%BB%BD%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">磁盘阵列+备份盘    -x参数为备份参数</span></a></li></ol>","author":{"name":"Randolph","slug":"blog-author","avatar":"/img/log.jpg","link":"/","description":"Knowledge of operation and maintenance, sharing of difficult and miscellaneous diseases","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"LVM逻辑卷管理器","uid":"5807d01a83cab541c255c8528031d9c8","slug":"LVM逻辑卷管理器","date":"2021-11-30T04:40:31.000Z","updated":"2024-04-08T05:56:00.608Z","comments":true,"path":"api/articles/LVM逻辑卷管理器.json","keywords":null,"cover":"/img/lvm.jpeg","text":"部署逻辑卷查看当前磁盘 [root@localhost randy]# ls /dev/sd* /dev/sda /dev/sda1 /dev/sda2 /de...","permalink":"/post/LVM逻辑卷管理器","photos":[],"count_time":{"symbolsCount":"8.9k","symbolsTime":"8 mins."},"categories":[],"tags":[{"name":"Linux","slug":"Linux","count":6,"path":"api/tags/Linux.json"}],"author":{"name":"Randolph","slug":"blog-author","avatar":"/img/log.jpg","link":"/","description":"Knowledge of operation and maintenance, sharing of difficult and miscellaneous diseases","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"linux 存储结构与管理硬盘","uid":"e769edd094fa55e708d00eec9988af0c","slug":"linux存储结构与管理硬盘","date":"2021-11-15T05:28:40.000Z","updated":"2024-04-08T05:54:00.534Z","comments":true,"path":"api/articles/linux存储结构与管理硬盘.json","keywords":null,"cover":"/img/Disk.jpg","text":"一切从“/”开始绝对路径（absolute path）：从/根目录写起 相对路径（relative path）：当前路径写起 -----------------...","permalink":"/post/linux存储结构与管理硬盘","photos":[],"count_time":{"symbolsCount":"13k","symbolsTime":"11 mins."},"categories":[{"name":"Linux","slug":"Linux","count":5,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":6,"path":"api/tags/Linux.json"}],"author":{"name":"Randolph","slug":"blog-author","avatar":"/img/log.jpg","link":"/","description":"Knowledge of operation and maintenance, sharing of difficult and miscellaneous diseases","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}